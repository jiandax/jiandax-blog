---
title: 正则表达式
description: Regular Expression
date: 2021-06-16
draft: false
weight: 1
---

# 正则表达式

## 简介

- Regular Expression
- 是一种字符串匹配的描述模式，用来检索、替换那些符合某个规则的字符串



## 语法

### 转义字符

- 特殊字符：`( ) [ ] { }` 、`? * +`  、`^ $`、 `. \ |`

| 构造 | 匹配       |
| :--- | :--------- |
| x  | 字符 *x*   |
| \\ | 反斜线字符 |
| \t | 水平制表符 |
| \v | 垂直制表符 |
| \r | 回车符     |
| \n | 换行符     |
| \f | 换页符     |



### 普通字符类

| 构造           | 匹配                                 |
| :------------- | :----------------------------------- |
| [abc]        | 包含：a、b 或 c                |
| [^abc]       | 排除：任何字符，除了 a、b 或 c |
| [a-z]         | 区间：a 到 z                     |
| [a-zA-Z]     | 并集：a 到 z 或 A 到 Z       |
| [a-z&&[^bc]] | 交集：a 到 z，除了 b 和 c    |



### 预定义字符类

| 构造 | 匹配                        | 构造 | 匹配                |
| :--- | :-------------------------- | ---- | ------------------- |
| **`.`**  | 任何字符                    |      |                     |
| \d | 数字：[0-9]               | \D | 非数字： [^\d]    |
| \s | 空白字符：[ \t\n\x0B\f\r] | \S | 非空白字符：[^\s] |
| \w | 单词字符：[a-zA-Z_0-9]    | \W | 非单词字符：[^\w] |



### 边界定位符

| 构造 | 匹配       |
| :--- | :--------- |
| ^  | 行的开头   |
| $  | 行的结尾   |
| \b | 单词边界   |
| \B | 非单词边界 |



### 数量符

| 构造       | 匹配                                |
| :--------- | :---------------------------------- |
| *X*?     | *X*，零次或一次                     |
| *X**     | *X*，零次或多次                     |
| *X*+     | *X*，一次或多次                     |
| *X*{n}   | *X*，恰好 *n* 次                    |
| *X*{n,}  | *X*，至少 *n* 次                    |
| *X*{n,m} | *X*，至少 *n* 次，但是不超过 *m* 次 |



### 运算符

| 构造   | 匹配              |
| :----- | :---------------- |
| *XY*   | *X* 后跟 *Y*      |
| *X\|Y* | *X* 或 *Y*        |
| *(X)*  | X，作为捕获组     |
| *\n*   | 引用第*n*个捕获组 |



### 贪婪

- 限定符 `*`  `+` 是贪婪的，它们会尽可能多的匹配文字

- 限定符 `?` 是非贪婪的，它可以实现最小匹配。

  ```bash
  匹配字符串：<h1>RUNOOB-菜鸟教程</h1>
  
  正则表达式：/<.*>/		
  匹配结果：  <h1>RUNOOB-菜鸟教程</h1>
  
  正则表达式：/<.*?>/		
  匹配结果：  <h1>
  ```



## 捕获组

- 捕获组就是把正则表达式中子表达式匹配的内容，保存到内存中以数字编号或显式命名的组里，方便后面引用
- 使用`( )`表示捕获分组



### 普通捕获组

- 格式：`(Expression)`

- 从左到右计算表达式的`(`，从 1 开始进行编号，0 代表整个表达式

  ```bash
  正则表达式：(\d{4})-(\d{2}-(\d\d))
  ```
  
  | 编号 | 命名 | 捕获组                 | 匹配内容   |
  | ---- | ---- | ---------------------- | ---------- |
  | 0    |      | (\d{4})-(\d{2}-(\d\d)) | 2008-12-31 |
  | 1    |      | (\d{4})                | 2008       |
  | 2    |      | (\d{2}-(\d\d))         | 12-31      |
  | 3    |      | (\d\d)                 | 31         |



### 命名捕获组

- 格式：`(?<name>Expression)`
  ```bash
  正则表达式：(?<year>\d{4})-(?<date>\d{2}-(?<day>\d\d))
  ```
  
  | 编号 | 命名 | 捕获组                                       | 匹配内容   |
  | ---- | ---- | -------------------------------------------- | ---------- |
  | 0    | 0    | (?<year>\d{4})-(?<date>\d{2}-(?<day>\d\d)) | 2008-12-31 |
  | 1    | year | (?<year>\d{4})                             | 2008       |
  | 2    | date | (?<date>\d{2}-(?<day>\d\d))                | 12-31      |
  | 3    | day  | (?<day>\d\d)                               | 31         |



### 选择

-  **?=**、**?<=**、**?!**、**?<!**

| 构造        | 匹配                    |
| :---------- | :---------------------- |
| \n          | 引用捕获组 *n*          |
| *X*(?=*Y*)  | 查找 *Y* 前面的 *X*     |
| (?<=*Y*)*X* | 查找 *Y* 后面的 *X*     |
| *X*(?!*Y*)  | 查找后面不是 *Y* 的 *X* |
| (?<!*Y*)*X* | 查找前面不是 *Y* 的 *X* |



## JDK正则

- java.util.regex

```java
String input = "ABC";
String regex = "[a-z]{4}";

// String类
input.matches(regex);

// Pattern类
Pattern.matches(regex, input)
    
// Matcher类
Pattern pattern = Pattern.compile(regex);
Matcher matcher = pattern.matcher(input);
matcher.matches();		// 整个字符串是否匹配
matcher.find();		// 是否有下一个匹配的子串
matcher.group(1);		// 获取1号捕获组匹配到的子串
...
```



## 常用正则

...

